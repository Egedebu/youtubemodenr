<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Ana Sayfa — YouTube Modern</title>
  <style>
    body{font-family:Inter, system-ui, Arial, sans-serif;background:#0f1724;color:#e6eef8;margin:0;padding:0;}
    .container{max-width:1000px;margin:40px auto;padding:24px}
    header{display:flex;align-items:center;justify-content:space-between}
    h1{margin:0;font-size:20px}
    .search{display:flex;gap:8px;margin-top:24px}
    input[type=text]{flex:1;padding:12px;border-radius:10px;border:1px solid #243240;background:#0b1220;color:#e6eef8}
    button{padding:12px 16px;border-radius:10px;border:0;background:#ff3b30;color:white;cursor:pointer}
    .small{font-size:13px;color:#9fb0c8}
    .modal{position:fixed;inset:0;background:rgba(2,6,23,0.6);display:flex;align-items:center;justify-content:center}
    .card{background:#071226;padding:20px;border-radius:12px;max-width:520px;width:100%}
    .card input{width:100%;padding:10px;border-radius:8px;border:1px solid #243240;background:#071226;color:#e6eef8}
    .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>YouTube Modern — Ana Sayfa</h1>
      <div class="small">Egedebu / Modern Tasarım</div>
    </header>

    <p class="small">Bu uygulama YouTube Data API v3 kullanır. Lütfen çalıştırmak için bir API anahtarı girin (ör. AIzaSyD...).</p>

    <form id="searchForm" class="search" onsubmit="search(event)">
      <input id="q" type="text" placeholder="Ara — video başlığı, kanal veya açıklama" required>
      <button type="submit">Ara</button>
    </form>

    <p class="small" style="margin-top:12px">API anahtarı ayarlanmadıysa, arama yaparken istenecektir. Anahtarı değiştirmek için <a href="#" id="changeKey">buraya tıkla</a>.</p>
  </div>

  <div id="keyModal" class="modal" style="display:none">
    <div class="card">
      <h3>API Anahtarı Girin</h3>
      <p class="small">YouTube Data API v3 anahtarınızı girin. Örnek: AIzaSyD9pxxvN6eh0bR6zdfHI-ADmYBSGC--***</p>
      <input id="apiKeyInput" placeholder="AIzaSy...">
      <div class="actions">
        <button id="saveKey">Kaydet</button>
        <button id="cancelKey">İptal</button>
      </div>
    </div>
  </div>

  <script>
    function showModal(){document.getElementById('keyModal').style.display='flex';}
    function hideModal(){document.getElementById('keyModal').style.display='none';}

    document.addEventListener('DOMContentLoaded',()=>{
      const key = localStorage.getItem('yt_api_key');
      if(!key) showModal();
      document.getElementById('changeKey').addEventListener('click',e=>{e.preventDefault();showModal();});
      document.getElementById('saveKey').addEventListener('click',()=>{
        const v = document.getElementById('apiKeyInput').value.trim();
        if(!v){alert('Anahtar boş olamaz.');return}
        localStorage.setItem('yt_api_key',v);
        hideModal();
        alert('API anahtarınız kaydedildi.');
      });
      document.getElementById('cancelKey').addEventListener('click',()=>{
        hideModal();
      });
    });

    function search(e){
      e && e.preventDefault();
      const q = document.getElementById('q').value.trim();
      if(!q) return;
      const key = localStorage.getItem('yt_api_key');
      if(!key){
        showModal();
        alert('Lütfen önce API anahtarınızı girin.');
        return;
      }
      // Redirect to search page with query
      const url = new URL(window.location.href);
      const base = url.origin + '/arama_ekran%C4%B1.html';
      window.location.href = base + '?q=' + encodeURIComponent(q);
    }
  </script>
</body>
</html>